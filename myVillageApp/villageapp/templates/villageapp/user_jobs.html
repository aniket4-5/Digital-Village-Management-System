{% extends 'villageapp/base.html' %}
{% load static %}

{% block content%}

<header class="container-fluid my-3 h3 text-center d-flex align-items-center justify-content-center">
  <img src="{% static 'villageapp/images/logo.png' %}" style="width: 5rem; height: 5rem;" class="mx-5">
  <p>Rajiv Nagar Jhir Job Portal</p>
</header>

<section id="bannerComp" style="background-image: url('{% static 'villageapp/images/bg1.png' %}');background-size: cover;
background-repeat: no-repeat;
width: 100%;
height: 40rem;

display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-end;
padding: 3%;
color:orangered;
font-weight: 500;
"class="container-fluid my-2">



  <h2 class="mb-4" style="font-size: 2rem;">Have any Work for our village people? </h2>

  <a href="{% url 'job_new_add' %}" class="mt-3"><button class="btn btn-success" style="font-size:1.3rem">Post New Job Here</button></a>


</section>
<section class="container-fluid p-3 my-4">
 
      <p class="my-3" style="font-size:1.5rem">Rajiv Nagar has many issues .For making complaint system faster and kind of cases which are
          under Panchayat administration Rajiv Nagar residents can complain here .Process is very simple to
          register grievance.
          What someone has to do is only fill up the form and state their name and other personal info and the
          cause of complaint . Complaints can range from small fights to even complains for putting up street
          light or changing faluty street lights ,issues like drinking water , drainage clog or farm fights .

      </p>
</section>

<div class="my-2 p-4">
    <h1 class="text-center text-primary text-uppercase ">Jobs</h1>

   
    <div class="row my-5 bg-light p-3">
      <a href="{% url 'job_new_add' %}" class="btn btn-outline-primary col-2 mx-2">Post a Job </a>
    
      <a href="{% url 'village-complaints' %}" class="btn btn-primary col-2 mx-2">All Jobs </a>
      
     
     {% if user.is_authenticated %}
     <a href="{% url 'user_comp' user.username %}" class="btn btn-outline-primary col-2 mx-2">My Jobs </a>
     {% endif %}
     
    </div>

  
    {% if data %}
    <h6 class="my-3 text-success">Posted by : {{view.kwargs.username}} </h6>
    <table class="table">
      <thead class="bg-dark text-warning">
        <tr>
          <th scope="col">Sr. no.</th>
          <th scope="col">Title</th>
          <th scope="col">Posted by</th>
          <th scope="col">Salary</th>
          <th scope="col">No of Opening</th>
          <th scope="col">Location</th>

          <th scope="col">Date/Time Posted</th>
          <th scope="col">Status</th>
          <th>More</th>
          
        </tr>
      </thead>
      <tbody>
  {% for item  in data  %}

    
     
    
     
        <tr>
          <th scope="row">1</th>
          
          <td>{{item.title}}</td>
          <td>{{item.author}}</td>
          <td>{{item.salary_desc}}</td>
          <td>{{item.no_of_opening}}</td>
          <td>{{item.location}}</td>
          <td>{{item.date_posted}}</td>
          {% if item.status %}
          <td><p class="btn btn-success text-uppercase">Active</p></td>
          {% else %}
          <td><p class="btn btn-warning text-uppercase">Not Active</p></td>
          {% endif %}
          <td>  <a href="{% url 'job_detail' item.id %}" class="btn btn-primary">View Details</a></td>
        </tr>
        
     

     
    
  
  {% endfor %}
 
   
  </tbody>
</table>

    {% else %}
    
    <h3>No Jobs found </h3>

    {% endif%}

</div>
<div class='p-2'>
  {% if is_paginated %}

  {% if page_obj.has_previous %}
    <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
  {% endif %}
 
  {% for num in page_obj.paginator.page_range %}
    {% if page_obj.number == num %}
      <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
      <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
    {% endif %}
  {% endfor %}
 
  {% if page_obj.has_next %}
    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
  {% endif %}
 
 {% endif %}
 </div>
{% endblock content%}